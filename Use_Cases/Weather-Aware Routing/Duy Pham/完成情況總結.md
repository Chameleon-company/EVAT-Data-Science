# å®Œæˆæƒ…æ³ç¸½çµ

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. å¾Œç«¯ä¿®å¾© (Backend Fix)
- âœ… å°‡ FastAPI è½‰æ›ç‚º Flask
- âœ… æ·»åŠ ä¼ºæœå™¨å•Ÿå‹•ä»£ç¢¼ (`app.run()`)
- âœ… æ·»åŠ  CORS æ”¯æ´ï¼ˆå¯é¸ï¼Œå³ä½¿æ²’æœ‰ flask-cors ä¹Ÿèƒ½é‹è¡Œï¼‰
- âœ… æ·»åŠ éŒ¯èª¤è™•ç†å’Œè¼¸å…¥é©—è­‰
- âœ… ç«¯é»æ”¹ç‚º `/predict`ï¼ˆæ›´ç°¡æ½”ï¼‰
- âœ… æ·»åŠ å•Ÿå‹•ç¢ºèªè¨Šæ¯

### 2. å‰ç«¯æ•´åˆæº–å‚™ (Frontend Integration)
- âœ… å‰µå»º `apiClient.ts` - ç”Ÿç”¢ç´š TypeScript å®¢æˆ¶ç«¯
- âœ… å‰µå»º `useEVPrediction.ts` - React Hook åŒ…è£
- âœ… å®Œæ•´çš„é¡å‹å®šç¾©å’ŒéŒ¯èª¤è™•ç†

### 3. è¼”åŠ©æ–‡ä»¶
- âœ… `SETUP_GUIDE.md` - è©³ç´°è¨­ç½®æŒ‡å—
- âœ… `test_api.py` - API æ¸¬è©¦è…³æœ¬
- âœ… `start_server.sh` - ä¼ºæœå™¨å•Ÿå‹•è…³æœ¬

## âš ï¸ ç™¼ç¾çš„å•é¡Œ

**å•é¡Œï¼š** ç³»çµ±ä¸­ç¼ºå°‘å¿…è¦çš„ Python å¥—ä»¶ï¼ˆpandas ç­‰ï¼‰

**åŸå› ï¼š** å¯èƒ½æ˜¯åœ¨ä¸åŒçš„ Python ç’°å¢ƒä¸­ï¼Œæˆ–è€…å¥—ä»¶æœªæ­£ç¢ºå®‰è£

## ğŸ“‹ ä½ éœ€è¦æ‰‹å‹•å®Œæˆçš„æ­¥é©Ÿ

### æ­¥é©Ÿ 1: å®‰è£ä¾è³´å¥—ä»¶
```bash
cd "/Users/wingyip/Desktop/EVAT-Data-Science/Use_Cases/Weather-Aware Routing/Duy Pham"
pip3 install pandas scikit-learn shapely geopandas flask flask-cors joblib
```

### æ­¥é©Ÿ 2: é©—è­‰å®‰è£
```bash
python3 -c "import pandas, sklearn, shapely, geopandas, flask, joblib; print('âœ… æ‰€æœ‰å¥—ä»¶å·²å®‰è£ï¼')"
```

### æ­¥é©Ÿ 3: å•Ÿå‹•ä¼ºæœå™¨
```bash
python3 api.py
```

ä½ æ‡‰è©²æœƒçœ‹åˆ°ï¼š
```
==================================================
Starting EV Traffic & Weather Model API...
Server will be available at http://localhost:5000
==================================================
 * Running on http://0.0.0.0:5000
```

### æ­¥é©Ÿ 4: æ¸¬è©¦ APIï¼ˆåœ¨å¦ä¸€å€‹çµ‚ç«¯ï¼‰
```bash
# ç°¡å–®æ¸¬è©¦
curl http://localhost:5000/

# æˆ–ä½¿ç”¨æ¸¬è©¦è…³æœ¬ï¼ˆéœ€è¦å…ˆå®‰è£ requests: pip3 install requestsï¼‰
python3 test_api.py
```

## ğŸ“ æ–‡ä»¶èªªæ˜

1. **api.py** - ä¿®å¾©å¾Œçš„ Flask å¾Œç«¯ä¼ºæœå™¨
2. **apiClient.ts** - TypeScript API å®¢æˆ¶ç«¯ï¼ˆç”¨æ–¼ Reactï¼‰
3. **useEVPrediction.ts** - React Hookï¼ˆæ–¹ä¾¿åœ¨çµ„ä»¶ä¸­ä½¿ç”¨ï¼‰
4. **SETUP_GUIDE.md** - è©³ç´°è¨­ç½®æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰
5. **test_api.py** - API æ¸¬è©¦è…³æœ¬
6. **start_server.sh** - ä¼ºæœå™¨å•Ÿå‹•è…³æœ¬

## ğŸ¯ API ä½¿ç”¨æ–¹å¼

### ç«¯é»ï¼š`POST http://localhost:5000/predict`

**è«‹æ±‚æ ¼å¼ï¼š**
```json
{
  "year": 2023,
  "start_lat": -37.8136,
  "start_lon": 144.9631
}
```

**å›æ‡‰æ ¼å¼ï¼š**
```json
{
  "year": 2023,
  "start_lat": -37.8136,
  "start_lon": 144.9631,
  "dist_to_nearest_ev_m": 1234.56,
  "ev_within_500m": 2,
  "avg_temp": 18.5,
  "total_prcp": 1200.0,
  "used_SHAPE_Length": 5000.0,
  "prediction": 0.85
}
```

## ğŸ’¡ æç¤º

- å¦‚æœç«¯å£ 5000 å·²è¢«ä½¿ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ `api.py` æœ€å¾Œä¸€è¡Œçš„ç«¯å£è™Ÿ
- å¦‚æœé‡åˆ° CORS éŒ¯èª¤ï¼Œç¢ºä¿å·²å®‰è£ `flask-cors`
- ä¼ºæœå™¨æœƒä¸€ç›´é‹è¡Œç›´åˆ°ä½ æŒ‰ `Ctrl+C` åœæ­¢

## ğŸš€ ä¸‹ä¸€æ­¥

1. å®‰è£ä¾è³´å¥—ä»¶
2. å•Ÿå‹•ä¼ºæœå™¨
3. æ¸¬è©¦ API é€£æ¥
4. åœ¨ä½ çš„ React æ‡‰ç”¨ä¸­æ•´åˆ `apiClient.ts`

å®Œæˆå¾Œï¼Œä½ å°±å¯ä»¥é–‹å§‹æ¸¬è©¦å‰ç«¯æ•´åˆäº†ï¼
